!function(e){var n={};function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=7)}([function(e,n,t){"use strict";function i(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.MusicPlayer=void 0;var r=function(){function e(n,t){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.$el=n,this.tigger(t)}var n,t,r;return n=e,(t=[{key:"tigger",value:function(e){this.$el.addEventListener("click",function(n){var t=n.target;document.getElementById("player").classList.add("show");var i=t.dataset.num,r=e.filter(function(e){if(e.num==i)return e})[0],a=r.url,s=r.lyric,c=r.songname,l=r.singer;document.querySelector("#player").querySelector(".songname").innerText=c,document.querySelector("#player").querySelector(".singer").innerText=l;var o=document.querySelector(".lines");if(o.children.length>1?(o.innerHTML="",this.parseLyric(s)):this.parseLyric(s),document.querySelector(".targetAudio")){var u=document.querySelector(".targetAudio");u.src=a,u.play()}else this.initPlayer(a)}.bind(this))}},{key:"initPlayer",value:function(e){var n=this,t=document.createElement("audio");t.src=e,t.classList.add("targetAudio"),document.body.appendChild(t),t.play(),document.querySelector(".icon-pause").addEventListener("click",function(){t.pause(),document.querySelector(".pause").classList.add("playing")}),document.querySelector(".icon-play").addEventListener("click",function(){t.play(),document.querySelector(".pause").classList.remove("playing")}),setInterval(function(){for(var e=t.currentTime,i=~~(e/60),r=e-60*i,a="".concat(n.pad(i),":").concat(n.pad(r)),s=document.querySelector(".lines"),c=0;c<s.children.length;c++){var l=s.children[c].dataset.time,o=s.children[c+1].dataset.time;if(void 0!==s.children[c+1]&&l<a&&a<o){var u=s.children[c].offsetTop-s.offsetTop;s.style.transform="translateY(-".concat(u,"px)"),s.children[c].classList.add("active"),s.children[c].previousElementSibling&&s.children[c].previousElementSibling.classList.remove("active");break}}},300)}},{key:"pad",value:function(e){return e>=10?e+"":"0"+e}},{key:"parseLyric",value:function(e){var n=e.split("\n"),t=/^\[(.+)\](.*)$/;(n=n.map(function(e){var n=e.match(t);if(n)return{time:n[1],words:n[2]}})).map(function(e){if(e){var n=document.querySelector(".lyric"),t=document.createElement("p");t.setAttribute("data-time",e.time),t.innerText=e.words,n.children[0].appendChild(t)}})}}])&&i(n.prototype,t),r&&i(n,r),e}();n.MusicPlayer=r},,function(e,n,t){"use strict";function i(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.Slider=void 0;var r=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.$el=n.el,this.slider=n.slider,this.interval=n.interval||3e3,this.index=0,this.render(),this.start()}var n,t,r;return n=e,(t=[{key:"render",value:function(){this.$el.innerHTML='<ul class="slider-wrap"></ul><ul class="slider-tab"></ul>',this.$wrap=this.$el.firstElementChild,this.$wrap.innerHTML=this.slider.map(function(e){return' <li class="slider-item">\n        <a href="'.concat(e.link,'">\n          <img src="').concat(e.images,'">\n        </a>\n      </li> ')}).join("");var e=this.$wrap.firstElementChild.cloneNode(!0);this.$wrap.appendChild(e),this.$wrap.style.width="".concat(100*(this.slider.length+1),"%"),this.$wrap.nextSibling.innerHTML='<li class="item active"></li>\n                              <li class="item"></li>\n                              <li class="item"></li>\n                              <li class="item"></li>'}},{key:"start",value:function(){setInterval(this.next.bind(this),2500)}},{key:"next",value:function(){if(this.$wrap.style.transition="transform 1s",this.index+=1,this.index===this.slider.length+1)return this.$wrap.style.transition="none",this.$wrap.style.transform="translate(0%)",void(this.index=0);this.index<this.slider.length?(this.$wrap.nextSibling.children[this.index-1].classList.remove("active"),this.$wrap.nextSibling.children[this.index].classList.add("active")):(this.$wrap.nextSibling.children[this.slider.length-1].classList.remove("active"),this.$wrap.nextSibling.children[0].classList.add("active")),this.$wrap.style.transform="translate(-".concat(100*this.index/(this.slider.length+1),"%)")}}])&&i(n.prototype,t),r&&i(n,r),e}();n.Slider=r},function(e,n,t){"use strict";function i(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.Songlist=void 0;var r=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.$el=n.el,this.songlist=n.songlist,this.render()}var n,t,r;return n=e,(t=[{key:"render",value:function(){var e=document.createElement("ul");e.classList.add("sl-ul"),e.innerHTML=this.songlist.map(function(e){return'\n        <li class="sl-item">\n          <a href="./playlist.html?id='.concat(e.id,'">\n            <img src="').concat(e.images,'">\n            <p>').concat(e.description,"</p>\n          </a>\n        </li> \n      ")}).join(""),this.$el.appendChild(e)}}])&&i(n.prototype,t),r&&i(n,r),e}();n.Songlist=r},function(e,n,t){"use strict";var i=t(0);fetch("/src/json/rank.json").then(function(e){return e.json()}).then(function(e){var n=e.data.rank,t=document.querySelector("#rank-view"),r=document.createElement("ul");r.classList.add("rank-list"),r.innerHTML=n.map(function(e){return'\n      <li class="rank-item" data-num="'.concat(e.num,'">\n        <div class="rank-num" data-num="').concat(e.num,'">').concat(e.num,'</div>\n        <div class= "rank-content" data-num="').concat(e.num,'">\n          <div class="songname" data-num="').concat(e.num,'">').concat(e.songname,'</div>\n          <div class="singer" data-num="').concat(e.num,'">').concat(e.singer,'</div>\n          <svg class="play" data-num="').concat(e.num,'">\n            <use xlink:href="#icon-custom-toplay"></use>\n          </svg>\n        </div>\n      </li>\n    ')}).join(""),t.appendChild(r);var a=document.querySelector(".rank-list");new i.MusicPlayer(a,n)})},function(e,n,t){"use strict";var i=t(0);fetch("/src/json/rank.json").then(function(e){return e.json()}).then(function(e){var n=e.data.rank,t=document.querySelector(".output"),r=void 0,a=document.querySelector(".icon-clean");document.querySelector("#searchSong").addEventListener("input",function(e){var i=e.target.value;a.classList.add("active"),a.addEventListener("click",function(){document.querySelector(".icon-clean").classList.remove("active"),document.querySelector("#searchSong").value="",t.innerHTML=""}),r&&clearTimeout(r),r=setTimeout(function(){var e,a;t.innerHTML="",(e=i,a=n,new Promise(function(n,t){if(""!=e){var i=a.filter(function(n){return n.songname.indexOf(e)>=0});setTimeout(function(){n(i)},200*Math.random()+400)}else document.querySelector(".icon-clean").classList.remove("active")})).then(function(e){if(r=void 0,0!==e.length)for(var n=0;n<e.length;n++){var i=document.createElement("li");i.innerText=e[n].songname,i.dataset.num=e[n].num,t.appendChild(i)}else t.innerHTML="<li>没有结果</li>"})},400)}),new i.MusicPlayer(t,n)})},function(e,n,t){"use strict";document.addEventListener("click",function(e){var n=e.target;if("tab"===n.dataset.role){var t=document.querySelector(n.dataset.view);if([].forEach.call(n.parentNode.children,function(e){e.classList.remove("active")}),n.classList.add("active"),t)[].forEach.call(t.parentNode.children,function(e){e.style.display="none"}),t.style.display="block",document.querySelector("#player").style.display="block"}})},function(e,n,t){"use strict";t(6),t(5),t(4);var i=t(3),r=t(2);fetch("/src/json/all.json").then(function(e){return e.json()}).then(function(e){var n=e.data.slider.map(function(e){return{link:e.linkjson,images:e.imagesjson}});new r.Slider({el:document.querySelector("#slider"),slider:n});var t=e.data.songlist;new i.Songlist({el:document.querySelector(".song-list"),songlist:t})}),document.getElementsByClassName("out-player")[0].addEventListener("click",function(e){e.target;document.getElementById("player").classList.remove("show")})}]);